(function(){"use strict";var e={5960:function(e,t,s){var a=s(9963),o=s(6252);function l(e,t,s,a,l,n){const r=(0,o.up)("NavBar"),i=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r),(0,o.Wm)(i)])}var n=s(3577);const r=e=>((0,o.dD)("data-v-ed72ea40"),e=e(),(0,o.Cn)(),e),i={class:"navbar navbar-expand-lg navbar-dark bg-dark"},c={class:"container"},d={class:"collapse navbar-collapse",id:"navbarText"},u={class:"navbar-nav me-auto mb-2 mb-lg-0"},p={class:"nav-item"},m={class:"nav-item"},_={class:"nav-item"},h={class:"nav-item"},g={key:0,class:"navbar-nav"},b={class:"nav-item dropdown"},v={class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},f=["src"],w={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},y=r((()=>(0,o._)("li",null,[(0,o._)("hr",{class:"dropdown-divider"})],-1))),k={key:1,class:"navbar-nav"},x={class:"nav-item"},C={class:"nav-item"};function z(e,t,s,a,l,r){const z=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("nav",i,[(0,o._)("div",c,[(0,o.Wm)(z,{class:"navbar-brand",to:{name:"home"}},{default:(0,o.w5)((()=>[(0,o.Uk)("King Of Bots")])),_:1}),(0,o._)("div",d,[(0,o._)("ul",u,[(0,o._)("li",p,[(0,o.Wm)(z,{class:(0,n.C_)("pk_index"==a.route_name?"nav-link active":"nav-link"),to:{name:"pk_index"}},{default:(0,o.w5)((()=>[(0,o.Uk)("对战")])),_:1},8,["class"])]),(0,o._)("li",m,[(0,o.Wm)(z,{class:(0,n.C_)("record_index"==a.route_name?"nav-link active":"nav-link"),to:{name:"record_index"}},{default:(0,o.w5)((()=>[(0,o.Uk)("对局列表")])),_:1},8,["class"])]),(0,o._)("li",_,[(0,o.Wm)(z,{class:(0,n.C_)("ranklist_index"==a.route_name?"nav-link active":"nav-link"),to:{name:"ranklist_index"}},{default:(0,o.w5)((()=>[(0,o.Uk)("排行榜")])),_:1},8,["class"])]),(0,o._)("li",h,[(0,o.Wm)(z,{class:(0,n.C_)("forum_index"==a.route_name?"nav-link active":"nav-link"),to:{name:"forum_index"}},{default:(0,o.w5)((()=>[(0,o.Uk)("论坛")])),_:1},8,["class"])])]),e.$store.state.user.is_login?((0,o.wg)(),(0,o.iD)("ul",g,[(0,o._)("li",b,[(0,o._)("a",v,[(0,o._)("img",{src:e.$store.state.user.photo,alt:"",class:"user-photo"},null,8,f),(0,o.Uk)(" "+(0,n.zw)(e.$store.state.user.username),1)]),(0,o._)("ul",w,[(0,o._)("li",null,[(0,o.Wm)(z,{class:"dropdown-item",to:{name:"user_bot_index"}},{default:(0,o.w5)((()=>[(0,o.Uk)("我的Bot")])),_:1})]),y,(0,o._)("li",null,[(0,o._)("a",{class:"dropdown-item",href:"#",onClick:t[0]||(t[0]=(...e)=>a.logout&&a.logout(...e))},"退出")])])])])):((0,o.wg)(),(0,o.iD)("ul",k,[(0,o._)("li",x,[(0,o.Wm)(z,{class:"nav-link",to:{name:"user_account_login"},role:"button"},{default:(0,o.w5)((()=>[(0,o.Uk)(" 登录 ")])),_:1})]),(0,o._)("li",C,[(0,o.Wm)(z,{class:"nav-link",to:{name:"user_account_register"},role:"button"},{default:(0,o.w5)((()=>[(0,o.Uk)(" 注册 ")])),_:1})])]))])])])}var I=s(2201),A=s(3907),D={setup(){const e=(0,A.oR)(),t=(0,I.yj)();let s=(0,o.Fl)((()=>t.name));const a=()=>{e.dispatch("logout"),e.state.user.button=!0,localStorage.setItem("current_webPage_name","user_account_login")};return{route_name:s,logout:a}}},B=s(3744);const j=(0,B.Z)(D,[["render",z],["__scopeId","data-v-ed72ea40"]]);var S=j,M=s(3734),H={components:{NavBar:S}};const U=(0,B.Z)(H,[["render",l]]);var L=U;function P(e,t,s,a,l,n){const r=(0,o.up)("PlayGround"),i=(0,o.up)("MatchingGround"),c=(0,o.up)("ResultBoard");return(0,o.wg)(),(0,o.iD)(o.HY,null,["playing"===e.$store.state.pk.status?((0,o.wg)(),(0,o.j4)(r,{key:0})):(0,o.kq)("",!0),"matching"===e.$store.state.pk.status?((0,o.wg)(),(0,o.j4)(i,{key:1})):(0,o.kq)("",!0),"none"!=e.$store.state.pk.loser?((0,o.wg)(),(0,o.j4)(c,{key:2})):(0,o.kq)("",!0)],64)}const O={class:"playground"},q={key:0,class:"position"};function R(e,t,s,a,l,r){const i=(0,o.up)("GameMap");return(0,o.wg)(),(0,o.iD)("div",O,[(0,o.Wm)(i),!1===e.$store.state.record.is_record?((0,o.wg)(),(0,o.iD)("div",q,(0,n.zw)(a.position),1)):(0,o.kq)("",!0)])}const V={ref:"parent",class:"gamemap"},$={ref:"canvas",tabindex:"0"};function T(e,t,s,a,l,n){return(0,o.wg)(),(0,o.iD)("div",V,[(0,o._)("canvas",$,null,512)],512)}s(7658);const W=[];class Z{constructor(){W.push(this),this.has_called_start=!1,this.timedelta=0}start(){}update(){}on_destroy(){}destroy(){this.on_destroy();for(let e in W){const t=W[e];t===this&&W.splice(e,1)}}}let F;const G=e=>{for(let t of W)t.has_called_start?(t.timedelta=e-F,t.update()):(t.has_called_start=!0,t.start());F=e,requestAnimationFrame(G)};requestAnimationFrame(G);class K extends Z{constructor(e,t,s){super(),this.r=e,this.c=t,this.gamemap=s,this.color="#B37226"}update(){this.render()}render(){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,t.fillRect(this.c*e,this.r*e,e,e)}}class E{constructor(e,t){this.r=e,this.c=t,this.x=t+.5,this.y=e+.5}}class N extends Z{constructor(e,t){super(),this.id=e.id,this.color=e.color,this.gamemap=t,this.cells=[new E(e.r,e.c)],this.next_cell=null,this.speed=5,this.direction=-1,this.status="idle",this.dr=[-1,0,1,0],this.dc=[0,1,0,-1],this.step=0,this.eps=.01,this.eye_direction=0,1===this.id&&(this.eye_direction=2),this.eye_dx=[[-1,1],[1,1],[1,-1],[-1,-1]],this.eye_dy=[[-1,-1],[-1,1],[1,1],[1,-1]]}start(){}set_direction(e){this.direction=e}check_tail_increasing(){return this.step<=10||this.step%3===1}next_step(){const e=this.direction;this.next_cell=new E(this.cells[0].r+this.dr[e],this.cells[0].c+this.dc[e]),this.eye_direction=e,this.direction=-1,this.status="move",this.step++;const t=this.cells.length;for(let s=t;s>0;s--)this.cells[s]=JSON.parse(JSON.stringify(this.cells[s-1]))}update_move(){const e=this.next_cell.x-this.cells[0].x,t=this.next_cell.y-this.cells[0].y,s=Math.sqrt(e*e+t*t);if(s<this.eps)this.cells[0]=this.next_cell,this.next_cell=null,this.status="idle",this.check_tail_increasing()||this.cells.pop();else{const a=this.speed*this.timedelta/1e3;if(this.cells[0].x+=a*e/s,this.cells[0].y+=a*t/s,!this.check_tail_increasing()){const e=this.cells.length,t=this.cells[e-1],o=this.cells[e-2],l=o.x-t.x,n=o.y-t.y;t.x+=a*l/s,t.y+=a*n/s}}}update(){"move"===this.status&&this.update_move(),this.render()}render(){const e=this.gamemap.L,t=this.gamemap.ctx;t.fillStyle=this.color,"die"===this.status&&(t.fillStyle="white");for(const s of this.cells)t.beginPath(),t.arc(s.x*e,s.y*e,e/2*.8,0,2*Math.PI),t.fill();for(let s=1;s<this.cells.length;s++){const a=this.cells[s-1],o=this.cells[s];Math.abs(a.x-o.x)<this.eps&&Math.abs(a.y-o.y)<this.eps||(Math.abs(a.x-o.x)<this.eps?t.fillRect((a.x-.4)*e,Math.min(a.y,o.y)*e,.8*e,Math.abs(a.y-o.y)*e):t.fillRect(Math.min(a.x,o.x)*e,(a.y-.4)*e,Math.abs(a.x-o.x)*e,.8*e))}t.fillStyle="black";for(let s=0;s<2;s++){const a=(this.cells[0].x+.15*this.eye_dx[this.eye_direction][s])*e,o=(this.cells[0].y+.15*this.eye_dy[this.eye_direction][s])*e;t.beginPath(),t.arc(a,o,.05*e,0,2*Math.PI),t.fill()}}}class Y extends Z{constructor(e,t,s){super(),this.ctx=e,this.parent=t,this.store=s,this.L=0,this.rows=13,this.cols=14,this.inner_walls_count=20,this.walls=[],this.snakes=[new N({id:0,color:"#4876EC",r:this.rows-2,c:1},this),new N({id:1,color:"#F94848",r:1,c:this.cols-2},this)]}create_walls(){const e=this.store.state.pk.gameMap;for(let t=0;t<this.rows;t++)for(let s=0;s<this.cols;s++)e[t][s]&&this.walls.push(new K(t,s,this))}add_listening_events(){if(!0===this.store.state.record.is_record){let e=0,t=500;const s=this.store.state.record.stepsA,a=this.store.state.record.stepsB,o=this.store.state.record.record_loser,[l,n]=this.snakes,r=setInterval((()=>{e>=s.length-1?("all"!==o&&"A"!==o||(l.status="die"),"all"!==o&&"B"!==o||(n.status="die"),clearInterval(r)):(l.set_direction(parseInt(s[e])),n.set_direction(parseInt(a[e]))),e++,t=this.store.state.user.rate}),t)}else this.ctx.canvas.focus(),this.ctx.canvas.addEventListener("keydown",(e=>{let t=-1;"w"===e.key?t=0:"d"===e.key?t=1:"s"===e.key?t=2:"a"===e.key&&(t=3),t>=0&&this.store.state.pk.socket.send(JSON.stringify({event:"move",direction:t}))}))}start(){this.create_walls(),this.add_listening_events()}update_size(){this.L=parseInt(Math.min(this.parent.clientWidth/this.cols,this.parent.clientHeight/this.rows)),this.ctx.canvas.width=this.L*this.cols,this.ctx.canvas.height=this.L*this.rows}check_ready(){for(const e of this.snakes){if("idle"!==e.status)return!1;if(-1===e.direction)return!1}return!0}next_step(){for(const e of this.snakes)e.next_step()}check_valid(e){for(const t of this.walls)if(t.r===e.r&&t.c===e.c)return!1;for(const t of this.snakes){let s=t.cells.length;t.check_tail_increasing()||s--;for(let a=0;a<s;a++)if(t.cells[a].r===e.r&&t.cells[a].c===e.c)return!1}return!0}update(){this.update_size(),this.check_ready()&&this.next_step(),this.render()}render(){const e="#AAD751",t="#A2D149";for(let s=0;s<this.rows;s++)for(let a=0;a<this.cols;a++)this.ctx.fillStyle=(s+a)%2==0?e:t,this.ctx.fillRect(a*this.L,s*this.L,this.L,this.L)}}var J=s(2262),Q={setup(){const e=new A.oR;let t=(0,J.iH)(null),s=(0,J.iH)(null);return(0,o.bv)((()=>{e.commit("updateGameObject",new Y(s.value.getContext("2d"),t.value,e))})),{parent:t,canvas:s}}};const X=(0,B.Z)(Q,[["render",T],["__scopeId","data-v-2e2abcb6"]]);var ee=X,te={components:{GameMap:ee},setup(){const e=(0,A.oR)();let t=(0,J.iH)("");return e.state.pk.idA==e.state.user.id?t.value="左下角":t.value="右上角",{position:t}}};const se=(0,B.Z)(te,[["render",R],["__scopeId","data-v-728c0338"]]);var ae=se;const oe=e=>((0,o.dD)("data-v-076684c4"),e=e(),(0,o.Cn)(),e),le={class:"matchground"},ne={class:"row justify-content-md-center"},re={class:"col-4"},ie={class:"username_photo_background",style:{"margin-left":"7vh"}},ce={class:"user-photo"},de=["src"],ue={class:"user-username"},pe={class:"col-4"},me={key:0,class:"time"},_e=oe((()=>(0,o._)("div",null,"计时",-1))),he={key:1,class:"time"},ge=oe((()=>(0,o._)("div",{style:{"margin-bottom":"0px","padding-left":"8vh",color:"bisque","padding-top":"15vh"}},"出战！！",-1))),be={class:"select-user-bot"},ve=["disabled"],fe=oe((()=>(0,o._)("option",{value:"-1",selected:""},"亲自出马",-1))),we=["value"],ye={class:"col-4"},ke={class:"username_photo_background"},xe={class:"user-photo"},Ce=["src"],ze={class:"user-username"};function Ie(e,t,s,l,r,i){return(0,o.wg)(),(0,o.iD)("div",le,[(0,o._)("div",ne,[(0,o._)("div",re,[(0,o._)("div",ie,[(0,o._)("div",ce,[(0,o._)("img",{src:l.store.state.user.photo,alt:""},null,8,de)]),(0,o._)("div",ue,(0,n.zw)(l.store.state.user.username),1)])]),(0,o._)("div",pe,["success"!==l.store.state.pk.time?((0,o.wg)(),(0,o.iD)("div",me,[_e,(0,o.Uk)(" "+(0,n.zw)(l.min)+" : "+(0,n.zw)(l.second),1)])):(0,o.kq)("",!0),"success"===l.store.state.pk.time?((0,o.wg)(),(0,o.iD)("div",he," 匹配成功！！ ")):(0,o.kq)("",!0),ge,(0,o._)("div",be,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.bot_id=e),disabled:l.showSelect,style:{cursor:"pointer"},class:"form-select","aria-label":"Default select example"},[fe,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.bots,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.id,key:e.id},(0,n.zw)(e.title),9,we)))),128))],8,ve),[[a.bM,l.bot_id]])])]),(0,o._)("div",ye,[(0,o._)("div",ke,[(0,o._)("div",xe,[(0,o._)("img",{src:l.store.state.pk.opponent_photo,alt:""},null,8,Ce)]),(0,o._)("div",ze,(0,n.zw)(l.store.state.pk.opponent_username),1)])]),(0,o._)("button",{onClick:t[1]||(t[1]=(...e)=>l.click_btn&&l.click_btn(...e)),class:"btn btn-warning"},(0,n.zw)(l.btn_info),1)])])}var Ae=s(9755),De=s.n(Ae),Be={setup(){const e=new A.oR;let t,s=(0,J.iH)("开始匹配"),a=(0,J.iH)(0),o=(0,J.iH)(0),l=(0,J.iH)(0),n=(0,J.iH)([]),r=(0,J.iH)("-1"),i=(0,J.iH)(!1);const c=()=>{"开始匹配"===s.value?(s.value="取消",i.value=!0,e.commit("updateTime","start"),t=setInterval(u,50),e.state.pk.socket.send(JSON.stringify({event:"start-matching",bot_id:r.value}))):(s.value="开始匹配",i.value=!1,e.commit("updateTime","stop"),window.clearInterval(t),a.value=0,o.value=0,e.state.pk.socket.send(JSON.stringify({event:"stop-matching"})))},d=()=>{De().ajax({url:"http://47.113.202.189:3000/api/user/bot/getlist/",type:"get",headers:{Authorization:"Bearer "+e.state.user.token},success(e){n.value=e}})};d();const u=()=>{l.value+=50,l.value>=1e3&&(o.value++,l.value=0),o.value>=60&&(a.value++,o.value=0),"stop"===e.state.pk.time&&(window.clearInterval(t),a.value=0,o.value=0),a.value>=60&&(c(),window.clearInterval(t),a.value=0,o.value=0)};return{store:e,btn_info:s,click_btn:c,min:a,second:o,bots:n,bot_id:r,showSelect:i}}};const je=(0,B.Z)(Be,[["render",Ie],["__scopeId","data-v-076684c4"]]);var Se=je;const Me={class:"result_board"},He={key:0,class:"result_board_grade"},Ue={key:1,class:"result_board_grade"},Le={key:2,class:"result_board_grade"},Pe={key:3,class:"result_board_grade"},Oe={class:"result_board_btn"};function qe(e,t,s,a,l,n){return(0,o.wg)(),(0,o.iD)("div",Me,["all"===e.$store.state.pk.loser?((0,o.wg)(),(0,o.iD)("div",He," Draw! ")):"A"===e.$store.state.pk.loser&&e.$store.state.pk.idA==e.$store.state.user.id?((0,o.wg)(),(0,o.iD)("div",Ue," Lose! ")):"B"===e.$store.state.pk.loser&&e.$store.state.pk.idB==e.$store.state.user.id?((0,o.wg)(),(0,o.iD)("div",Le," Lose! ")):((0,o.wg)(),(0,o.iD)("div",Pe," win!! ")),(0,o._)("div",Oe,[(0,o._)("button",{onClick:t[0]||(t[0]=(...e)=>a.button&&a.button(...e)),class:"btn btn-warning"},"再来一局!!")])])}var Re={setup(){const e=new A.oR,t=()=>{e.commit("updateStatus","matching"),e.commit("updateLoser","none"),e.commit("updateOpponent",{opponent_username:"我的对手",opponent_photo:"https://cdn.acwing.com/media/article/image/2022/08/09/1_1db2488f17-anonymous.png"})};return{store:e,button:t}}};const Ve=(0,B.Z)(Re,[["render",qe],["__scopeId","data-v-6dc7749d"]]);var $e=Ve,Te={components:{PlayGround:ae,MatchingGround:Se,ResultBoard:$e},setup(){const e=(0,A.oR)(),t=`ws://47.113.202.189:3000/websocket/${e.state.user.token}/`;let s=null;localStorage.setItem("current_webPage_name","home"),e.commit("updateLoser","none"),e.commit("updateIsRecord",!1),(0,o.bv)((()=>{e.commit("updateOpponent",{opponent_username:"我的对手",opponent_photo:"https://cdn.acwing.com/media/article/image/2022/08/09/1_1db2488f17-anonymous.png"}),s=new WebSocket(t),s.onopen=()=>{console.log("connect!"),e.commit("updateSocket",s)},s.onmessage=t=>{const s=JSON.parse(t.data);if("playing"===s.status)e.commit("updateTime","success"),e.commit("updateOpponent",{opponent_username:s.opponent_username,opponent_photo:s.opponent_photo}),setTimeout((()=>{e.commit("updateStatus","playing")}),2e3),e.commit("updateGame",s.game);else if("move"===s.event){console.log(s),null===e.state.pk.gameObject&&console.log("null-1");const t=e.state.pk.gameObject;null===e.state.pk.gameObject&&console.log("null-2");const[a,o]=t.snakes;a.set_direction(s.A_direction),o.set_direction(s.B_direction)}else if("result"===s.event){console.log(s),e.commit("updateTime","");const t=e.state.pk.gameObject,[a,o]=t.snakes;"all"!==s.loser&&"A"!==s.loser||(a.status="die"),"all"!==s.loser&&"B"!==s.loser||(o.status="die"),e.commit("updateLoser",s.loser)}},s.onclose=()=>{console.log("disconnect!")}})),(0,o.Ah)((()=>{s.close(),e.commit("updateStatus","matching")}))}};const We=(0,B.Z)(Te,[["render",P]]);var Ze=We;const Fe=e=>((0,o.dD)("data-v-4fb9a5e6"),e=e(),(0,o.Cn)(),e),Ge=Fe((()=>(0,o._)("div",{class:"title"},"对局列表",-1))),Ke={class:"table table-striped table-hover"},Ee=Fe((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{style:{"padding-left":"9vh"}},"A"),(0,o._)("th",{style:{"padding-left":"9vh"}},"B"),(0,o._)("th",{style:{"text-align":"center"}},"对战结果"),(0,o._)("th",{style:{"text-align":"center"}},"对战时间"),(0,o._)("th",{style:{"text-align":"center"}},"操作")])],-1))),Ne={style:{"padding-left":"5vh"}},Ye=["src"],Je={class:"record-user-username"},Qe={style:{"padding-left":"5vh"}},Xe=["src"],et={class:"record-user-username"},tt={style:{"text-align":"center"}},st={class:"record-result"},at={style:{"text-align":"center"}},ot={class:"record-record-createTime"},lt={style:{"text-align":"center"}},nt=["onClick"],rt={"aria-label":"..."},it={class:"pagination",style:{float:"right"}},ct={class:"page-item"},dt=Fe((()=>(0,o._)("span",{style:{"font-size":"small"}},"第一页",-1))),ut=[dt],pt={class:"page-item"},mt={class:"page-link",href:"#","aria-label":"Previous"},_t={class:"page-item"},ht=Fe((()=>(0,o._)("span",{style:{"font-size":"smaller"}},"<",-1))),gt=[ht],bt=["onClick"],vt={class:"page-item"},ft=Fe((()=>(0,o._)("span",{style:{"font-size":"smaller"}},">",-1))),wt=[ft],yt={class:"page-item"},kt={class:"page-link",href:"#","aria-label":"Next"},xt={class:"page-item"},Ct=Fe((()=>(0,o._)("span",{style:{"font-size":"small"}},"最后一页",-1))),zt=[Ct];function It(e,t,s,a,l,r){const i=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(i,null,{default:(0,o.w5)((()=>[Ge,(0,o._)("table",Ke,[Ee,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.records,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.record.id},[(0,o._)("td",Ne,[(0,o._)("img",{src:e.photoA,class:"record-user-photo",alt:""},null,8,Ye),(0,o.Uk)("   "),(0,o._)("span",Je,(0,n.zw)(e.usernameA),1)]),(0,o._)("td",Qe,[(0,o._)("img",{src:e.photoB,class:"record-user-photo",alt:""},null,8,Xe),(0,o.Uk)("   "),(0,o._)("span",et,(0,n.zw)(e.usernameB),1)]),(0,o._)("td",tt,[(0,o._)("span",st,(0,n.zw)(e.result),1)]),(0,o._)("td",at,[(0,o._)("span",ot,(0,n.zw)(e.record.createTime),1)]),(0,o._)("td",lt,[(0,o._)("button",{onClick:t=>a.open_record_content(e.record.id),type:"button",class:"btn btn-info"},"查看",8,nt)])])))),128))])]),(0,o._)("nav",rt,[(0,o._)("ul",it,[(0,o._)("li",ct,[(0,o._)("a",{class:"page-link",onClick:t[0]||(t[0]=e=>a.click_page(-5)),href:"#"},ut)]),(0,o._)("li",pt,[(0,o._)("a",mt,[(0,o._)("span",{onClick:t[1]||(t[1]=e=>a.click_page(-1)),"aria-hidden":"true"},"«")])]),(0,o._)("li",_t,[(0,o._)("a",{class:"page-link",onClick:t[2]||(t[2]=e=>a.click_page(-2)),href:"#"},gt)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.pages,(e=>((0,o.wg)(),(0,o.iD)("li",{class:"page-item",key:e.number},[(0,o._)("a",{class:(0,n.C_)("page-link "+e.is_active),onClick:t=>a.click_page(e.number),href:"#"},(0,n.zw)(e.number),11,bt)])))),128)),(0,o._)("li",vt,[(0,o._)("a",{class:"page-link",onClick:t[3]||(t[3]=e=>a.click_page(-3)),href:"#"},wt)]),(0,o._)("li",yt,[(0,o._)("a",kt,[(0,o._)("span",{onClick:t[4]||(t[4]=e=>a.click_page(-4)),"aria-hidden":"true"},"»")])]),(0,o._)("li",xt,[(0,o._)("a",{class:"page-link",onClick:t[5]||(t[5]=e=>a.click_page(-6)),href:"#"},zt)])])])])),_:1})}const At={class:"container content-field"},Dt={class:"card"},Bt={class:"card-body"};function jt(e,t){return(0,o.wg)(),(0,o.iD)("div",At,[(0,o._)("div",Dt,[(0,o._)("div",Bt,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])])])}const St={},Mt=(0,B.Z)(St,[["render",jt],["__scopeId","data-v-5c4c755b"]]);var Ht=Mt,Ut={components:{ContentField:Ht},setup(){localStorage.setItem("current_webPage_name","record_index");const e=(0,A.oR)();let t=e.state.record.current_page,s=(0,J.iH)([]),a=0,o=(0,J.iH)([]);const l=s=>{let o=parseInt(Math.ceil(a/8));-1===s?(t-=10,t<1&&(t=1)):-2===s?t-=1:-3===s?t+=1:-4===s?(t+=10,t>o&&(t=o)):t=-5===s?1:-6===s?o:s,e.commit("updateCurrent_page",t),t>=1&&t<=o&&r(t)},n=()=>{let e=parseInt(Math.ceil(a/8)),s=[];for(let a=t-2;a<=t+2;a++)a>=1&&a<=e&&s.push({number:a,is_active:a===t?"active":""});o.value=s},r=t=>{De().ajax({url:"http://47.113.202.189:3000/api/record/getlist/",type:"get",data:{page:t},headers:{Authorization:"Bearer "+e.state.user.token},success(e){s.value=e.records,a=e.record_count,n()},error(e){console.log(e)}})};r(t);const i=e=>{let t=[];for(let s=0,a=0;s<13;s++){let s=[];for(let t=0;t<14;t++,a++)"0"===e[a]?s.push(0):s.push(1);t.push(s)}return t},c=a=>{e.commit("updateCurrent_page",t);for(const t of s.value)if(t.record.id===a){e.commit("updateIsRecord",!0),e.commit("updateGame",{map:i(t.record.map),idA:t.record.aId,sxA:t.record.aSx,syA:t.record.asy,idB:t.record.bId,sxB:t.record.bSx,syB:t.record.bsy}),e.commit("updateSteps",{stepsA:t.record.asteps,stepsB:t.record.bsteps}),e.commit("updateRecordLoser",t.record.loser),Ol.push({name:"record_content",params:{recordId:a}});break}};return{records:s,open_record_content:c,pages:o,click_page:l}}};const Lt=(0,B.Z)(Ut,[["render",It],["__scopeId","data-v-4fb9a5e6"]]);var Pt=Lt;const Ot={style:{"text-align":"center"}};function qt(e,t,s,a,l,n){const r=(0,o.up)("PlayGround");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r),(0,o._)("div",Ot,[(0,o._)("button",{type:"button",onClick:t[0]||(t[0]=e=>a.back()),class:"btn btn-success record-btn"}," 返回 "),(0,o._)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>a.play&&a.play(...e)),class:"btn btn-warning record-btn",style:{"margin-left":"10vh"}}," 我也来一局 ")])])}var Rt={components:{PlayGround:ae},setup(){const e=(0,A.oR)();let t=e.state.user.id;e.state.user.id=t;const s=()=>{Ol.push({name:"record_index"})},a=()=>{Ol.push({name:"pk_index"})};return{back:s,play:a}}};const Vt=(0,B.Z)(Rt,[["render",qt],["__scopeId","data-v-e146cf64"]]);var $t=Vt;const Tt=e=>((0,o.dD)("data-v-6bf15bb2"),e=e(),(0,o.Cn)(),e),Wt=Tt((()=>(0,o._)("div",{class:"title"},"排行榜",-1))),Zt={class:"table table-striped table-hover"},Ft=Tt((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"排名"),(0,o._)("th",{style:{"padding-left":"29vh"}},"玩家"),(0,o._)("th",{style:{"text-align":"center"}},"天梯分")])],-1))),Gt={style:{"background-color":"aquamarine"}},Kt={style:{"padding-left":"25vh"}},Et=["src"],Nt={class:"record-user-username"},Yt={style:{"text-align":"center"}},Jt={style:{"padding-left":"25vh"}},Qt=["src"],Xt={class:"record-user-username"},es={style:{"text-align":"center"}},ts={"aria-label":"..."},ss={class:"pagination",style:{float:"right"}},as={class:"page-item"},os={class:"page-link",href:"#","aria-label":"Previous"},ls={class:"page-item"},ns=Tt((()=>(0,o._)("span",{style:{"font-size":"smaller"}},"<",-1))),rs=[ns],is=["onClick"],cs={class:"page-item"},ds=Tt((()=>(0,o._)("span",{style:{"font-size":"smaller"}},">",-1))),us=[ds],ps={class:"page-item"},ms={class:"page-link",href:"#","aria-label":"Next"};function _s(e,t,s,a,l,r){const i=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(i,null,{default:(0,o.w5)((()=>[Wt,(0,o._)("table",Zt,[Ft,(0,o._)("tbody",null,[(0,o._)("tr",Gt,[(0,o._)("td",null,(0,n.zw)(a.my_ranking),1),(0,o._)("td",Kt,[(0,o._)("img",{src:a.my.photo,class:"record-user-photo",alt:""},null,8,Et),(0,o.Uk)("   "),(0,o._)("span",Nt,(0,n.zw)(a.my.username),1)]),(0,o._)("td",Yt,(0,n.zw)(a.my.rating),1)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.users,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.user.id},[(0,o._)("td",null,(0,n.zw)(e.ranking),1),(0,o._)("td",Jt,[(0,o._)("img",{src:e.user.photo,class:"record-user-photo",alt:""},null,8,Qt),(0,o.Uk)("   "),(0,o._)("span",Xt,(0,n.zw)(e.user.username),1)]),(0,o._)("td",es,(0,n.zw)(e.user.rating),1)])))),128))])]),(0,o._)("nav",ts,[(0,o._)("ul",ss,[(0,o._)("li",as,[(0,o._)("a",os,[(0,o._)("span",{onClick:t[0]||(t[0]=e=>a.click_page(-1)),"aria-hidden":"true",style:{"font-size":"smaller"}},"第一页")])]),(0,o._)("li",ls,[(0,o._)("a",{class:"page-link",onClick:t[1]||(t[1]=e=>a.click_page(-2)),href:"#"},rs)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.pages,(e=>((0,o.wg)(),(0,o.iD)("li",{class:"page-item",key:e.number},[(0,o._)("a",{class:(0,n.C_)("page-link "+e.is_active),onClick:t=>a.click_page(e.number),href:"#"},(0,n.zw)(e.number),11,is)])))),128)),(0,o._)("li",cs,[(0,o._)("a",{class:"page-link",onClick:t[2]||(t[2]=e=>a.click_page(-3)),href:"#"},us)]),(0,o._)("li",ps,[(0,o._)("a",ms,[(0,o._)("span",{onClick:t[3]||(t[3]=e=>a.click_page(-4)),"aria-hidden":"true",style:{"font-size":"smaller"}},"最后一页")])])])])])),_:1})}var hs={components:{ContentField:Ht},setup(){localStorage.setItem("current_webPage_name","ranklist_index");const e=(0,A.oR)();let t=1,s=(0,J.iH)([]),a=0,o=(0,J.iH)([]),l=(0,J.iH)(),n=(0,J.iH)(1);const r=e=>{let s=parseInt(Math.ceil(a/8));-1===e?t=1:-2===e?t-=1:-3===e?t+=1:t=-4===e?s:e,t>=1&&t<=s&&c(t)},i=()=>{let e=parseInt(Math.ceil(a/8)),s=[];for(let a=t-2;a<=t+2;a++)a>=1&&a<=e&&s.push({number:a,is_active:a===t?"active":""});o.value=s},c=o=>{o=t,s.value=[],l.value=[],De().ajax({url:"http://47.113.202.189:3000/api/ranklist/getlist/",type:"get",data:{page:o},headers:{Authorization:"Bearer "+e.state.user.token},success(t){for(let e in t.users)s.value.push({user:t.users[e],ranking:parseInt(e)+1});a=t.user_count;for(const a of s.value)if(a.user.id==e.state.user.id){l.value=a.user,n.value=a.ranking;break}i()},error(e){console.log(e)}})};return c(t),{users:s,pages:o,click_page:r,my:l,my_ranking:n}}};const gs=(0,B.Z)(hs,[["render",_s],["__scopeId","data-v-6bf15bb2"]]);var bs=gs;const vs={style:{width:"3vh"},xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-justify",viewBox:"0 0 16 16"},fs=(0,o._)("path",{"fill-rule":"evenodd",d:"M2 12.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"},null,-1),ws=[fs],ys=(0,o._)("span",{style:{"font-size":"30px","font-weight":"600"}},"论坛",-1),ks=(0,o._)("button",{type:"button",class:"btn add_post","data-bs-toggle":"modal","data-bs-target":"#addpost"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-plus-lg",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z"})])],-1),xs={class:"modal fade",id:"addpost",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Cs={class:"modal-dialog modal-lg"},zs={class:"modal-content"},Is=(0,o._)("div",{class:"modal-header"},[(0,o._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"创建新帖子"),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),As={class:"modal-body"},Ds={class:"mb-3"},Bs={class:"modal-footer"},js=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1),Ss={text:"2xl",justify:"center"},Ms=["src"],Hs={class:"row",style:{padding:"25px"}},Us={class:"col-1"},Ls=["src"],Ps={class:"col-6"},Os={style:{"font-size":"22px"}},qs={style:{color:"darkgrey"}},Rs={style:{width:"4px"},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-circle-fill",viewBox:"0 0 16 16"},Vs=(0,o._)("circle",{cx:"8",cy:"8",r:"8"},null,-1),$s=[Vs],Ts=(0,o._)("div",{class:"col-5"},[(0,o._)("button",{type:"button",class:"btn btn-danger",style:{width:"12vh","margin-left":"12vh"}},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"})]),(0,o.Uk)(" 关注 ")]),(0,o._)("button",{type:"button",class:"btn btn-info",style:{width:"12vh","margin-left":"1vh"}},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chat-dots",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}),(0,o._)("path",{d:"m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9.06 9.06 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.437 10.437 0 0 1-.524 2.318l-.003.011a10.722 10.722 0 0 1-.244.637c-.079.186.074.394.273.362a21.673 21.673 0 0 0 .693-.125zm.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6c0 3.193-3.004 6-7 6a8.06 8.06 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a10.97 10.97 0 0 0 .398-2z"})]),(0,o.Uk)(" 私信 ")])],-1),Ws={style:{"margin-top":"1vh"}},Zs={style:{"padding-left":"4vh"}},Fs=(0,o._)("div",null," ——————————————————————————————————————————— ",-1),Gs=["onClick"],Ks={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-hand-thumbs-up",viewBox:"0 0 16 16"},Es=(0,o._)("path",{d:"M8.864.046C7.908-.193 7.02.53 6.956 1.466c-.072 1.051-.23 2.016-.428 2.59-.125.36-.479 1.013-1.04 1.639-.557.623-1.282 1.178-2.131 1.41C2.685 7.288 2 7.87 2 8.72v4.001c0 .845.682 1.464 1.448 1.545 1.07.114 1.564.415 2.068.723l.048.03c.272.165.578.348.97.484.397.136.861.217 1.466.217h3.5c.937 0 1.599-.477 1.934-1.064a1.86 1.86 0 0 0 .254-.912c0-.152-.023-.312-.077-.464.201-.263.38-.578.488-.901.11-.33.172-.762.004-1.149.069-.13.12-.269.159-.403.077-.27.113-.568.113-.857 0-.288-.036-.585-.113-.856a2.144 2.144 0 0 0-.138-.362 1.9 1.9 0 0 0 .234-1.734c-.206-.592-.682-1.1-1.2-1.272-.847-.282-1.803-.276-2.516-.211a9.84 9.84 0 0 0-.443.05 9.365 9.365 0 0 0-.062-4.509A1.38 1.38 0 0 0 9.125.111L8.864.046zM11.5 14.721H8c-.51 0-.863-.069-1.14-.164-.281-.097-.506-.228-.776-.393l-.04-.024c-.555-.339-1.198-.731-2.49-.868-.333-.036-.554-.29-.554-.55V8.72c0-.254.226-.543.62-.65 1.095-.3 1.977-.996 2.614-1.708.635-.71 1.064-1.475 1.238-1.978.243-.7.407-1.768.482-2.85.025-.362.36-.594.667-.518l.262.066c.16.04.258.143.288.255a8.34 8.34 0 0 1-.145 4.725.5.5 0 0 0 .595.644l.003-.001.014-.003.058-.014a8.908 8.908 0 0 1 1.036-.157c.663-.06 1.457-.054 2.11.164.175.058.45.3.57.65.107.308.087.67-.266 1.022l-.353.353.353.354c.043.043.105.141.154.315.048.167.075.37.075.581 0 .212-.027.414-.075.582-.05.174-.111.272-.154.315l-.353.353.353.354c.047.047.109.177.005.488a2.224 2.224 0 0 1-.505.805l-.353.353.353.354c.006.005.041.05.041.17a.866.866 0 0 1-.121.416c-.165.288-.503.56-1.066.56z"},null,-1),Ns=[Es],Ys={key:1,style:{color:"hotpink"},xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-hand-thumbs-up-fill",viewBox:"0 0 16 16"},Js=(0,o._)("path",{d:"M6.956 1.745C7.021.81 7.908.087 8.864.325l.261.066c.463.116.874.456 1.012.965.22.816.533 2.511.062 4.51a9.84 9.84 0 0 1 .443-.051c.713-.065 1.669-.072 2.516.21.518.173.994.681 1.2 1.273.184.532.16 1.162-.234 1.733.058.119.103.242.138.363.077.27.113.567.113.856 0 .289-.036.586-.113.856-.039.135-.09.273-.16.404.169.387.107.819-.003 1.148a3.163 3.163 0 0 1-.488.901c.054.152.076.312.076.465 0 .305-.089.625-.253.912C13.1 15.522 12.437 16 11.5 16H8c-.605 0-1.07-.081-1.466-.218a4.82 4.82 0 0 1-.97-.484l-.048-.03c-.504-.307-.999-.609-2.068-.722C2.682 14.464 2 13.846 2 13V9c0-.85.685-1.432 1.357-1.615.849-.232 1.574-.787 2.132-1.41.56-.627.914-1.28 1.039-1.639.199-.575.356-1.539.428-2.59z"},null,-1),Qs=[Js],Xs=["onClick"],ea={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-star",viewBox:"0 0 16 16"},ta=(0,o._)("path",{d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"},null,-1),sa=[ta],aa={key:1,style:{color:"gold"},xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-star-fill",viewBox:"0 0 16 16"},oa=(0,o._)("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"},null,-1),la=[oa],na={style:{"margin-left":"3vh"},class:"hover"},ra=["data-bs-target"],ia=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",class:"bi bi-chat-square-text",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-2.5a2 2 0 0 0-1.6.8L8 14.333 6.1 11.8a2 2 0 0 0-1.6-.8H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h2.5a1 1 0 0 1 .8.4l1.9 2.533a1 1 0 0 0 1.6 0l1.9-2.533a1 1 0 0 1 .8-.4H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"}),(0,o._)("path",{d:"M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"})],-1),ca=[ia],da=["id"],ua={class:"card"},pa={class:"container"},ma={class:"row"},_a={class:"col-1"},ha=["src"],ga={class:"col-11"},ba=["onClick"],va={class:"list-group list-group-flush"},fa={class:"list-group-item"},wa={class:"container"},ya={class:"row"},ka={class:"col-1"},xa=["src"],Ca={class:"col-11"},za={style:{"margin-left":"2vh",color:"#59caff","font-weight":"600"}},Ia=(0,o._)("span",{class:"huifu"},"回复",-1),Aa={style:{"margin-left":"2vh"}};function Da(e,t,s,l,r,i){const c=(0,o.up)("v-md-editor"),d=(0,o.up)("el-carousel-item"),u=(0,o.up)("el-carousel"),p=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(p,{style:{width:"60vw"}},{default:(0,o.w5)((()=>[(0,o._)("div",null,[((0,o.wg)(),(0,o.iD)("svg",vs,ws)),ys,ks,(0,o._)("div",xs,[(0,o._)("div",Cs,[(0,o._)("div",zs,[Is,(0,o._)("div",As,[(0,o._)("form",null,[(0,o._)("div",Ds,[(0,o.Wm)(c,{modelValue:l.new_post,"onUpdate:modelValue":t[0]||(t[0]=e=>l.new_post=e),height:"400px","disabled-menus":[],onUploadImage:e.handleUploadImage,placeholder:"分享你的生活吧！"},null,8,["modelValue","onUploadImage"])])])]),(0,o._)("div",Bs,[(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.add_post&&l.add_post(...e))},"发表"),js])])])]),(0,o.Wm)(u,{interval:4e3,type:"card",height:"200px",style:{width:"50vw",margin:"auto"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.carousel_photos,(e=>((0,o.wg)(),(0,o.j4)(d,{key:e},{default:(0,o.w5)((()=>[(0,o._)("h3",Ss,[(0,o._)("img",{src:e},null,8,Ms)])])),_:2},1024)))),128))])),_:1})]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.pacs,(s=>((0,o.wg)(),(0,o.iD)("div",{class:"post",key:s.post.username},[(0,o._)("div",Hs,[(0,o._)("div",Us,[(0,o._)("img",{class:"photo",src:s.post.photo,alt:""},null,8,Ls)]),(0,o._)("div",Ps,[(0,o._)("div",Os,(0,n.zw)(s.post.username),1),(0,o._)("div",qs,[(0,o.Uk)((0,n.zw)(s.post.timeDiff)+(0,n.zw)(s.post.ydhms)+"前 ",1),((0,o.wg)(),(0,o.iD)("svg",Rs,$s)),(0,o.Uk)(" "+(0,n.zw)(s.post.post.readCount)+" 阅读 ",1)])]),Ts,(0,o._)("div",Ws,[(0,o._)("span",Zs,(0,n.zw)(s.post.post.content),1),Fs,(0,o._)("div",null,[(0,o._)("span",{class:"hover",onClick:e=>l.like_post(s.post.post.id.toString())},[!1===s.post.isLove?((0,o.wg)(),(0,o.iD)("svg",Ks,Ns)):(0,o.kq)("",!0),!0===s.post.isLove?((0,o.wg)(),(0,o.iD)("svg",Ys,Qs)):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,n.zw)(s.post.post.loveCount),1)],8,Gs),(0,o._)("span",{style:{"margin-left":"3vh"},class:"hover",onClick:e=>l.star_post(s.post.post.id.toString())},[!1===s.post.isStar?((0,o.wg)(),(0,o.iD)("svg",ea,sa)):(0,o.kq)("",!0),!0===s.post.isStar?((0,o.wg)(),(0,o.iD)("svg",aa,la)):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,n.zw)(s.post.post.starCount),1)],8,Xs),(0,o._)("span",na,[(0,o._)("button",{class:"btn",type:"button","data-bs-toggle":"collapse","data-bs-target":"#comment"+s.post.post.id,"aria-expanded":"false","aria-controls":"collapseExample"},ca,8,ra),(0,o._)("div",{class:"collapse",id:"comment"+s.post.post.id},[(0,o._)("div",ua,[(0,o._)("div",pa,[(0,o._)("div",ma,[(0,o._)("h1",null,(0,n.zw)(s.post.post.commentCount)+"评论",1),(0,o._)("div",_a,[(0,o._)("img",{class:"photo",src:e.$store.state.user.photo},null,8,ha)]),(0,o._)("div",ga,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.new_comment=e),style:{"margin-left":"10px","border-radius":"10px"},cols:"75"},null,512),[[a.nr,l.new_comment]])]),(0,o._)("button",{onClick:e=>l.add_comment(s.post.post.id),style:{width:"15vh",margin:"20px auto"},class:"btn btn-primary",type:"button"},"提交评论",8,ba),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.comments,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"comment card",key:e.level_1.id},[(0,o._)("ul",va,[(0,o._)("li",fa,[(0,o._)("div",wa,[(0,o._)("div",ya,[(0,o._)("div",ka,[(0,o._)("img",{src:e.photo,class:"photo"},null,8,xa)]),(0,o._)("div",Ca,[(0,o._)("div",za,[(0,o.Uk)((0,n.zw)(e.username)+" ",1),Ia]),(0,o._)("div",Aa,(0,n.zw)(e.level_1.content),1)])])])])])])))),128))])])])],8,da)])])])])])))),128))])),_:1})}var Ba={components:{ContentField:Ht},setup(){localStorage.setItem("current_webPage_name","forum_index");const e=(0,A.oR)();let t=(0,J.iH)([]),s=(0,J.iH)(),a=(0,J.iH)(""),o=10,l=(0,J.qj)(["https://tse3-mm.cn.bing.net/th/id/OIP-C.jb-OE259cWU7Y_29TRf7bAHaEK?pid=ImgDet&rs=1","https://tse1-mm.cn.bing.net/th/id/OIP-C.o9L3gfJLCNdwFODmZrgcOAHaEK?pid=ImgDet&rs=1","https://pic4.zhimg.com/v2-86778bc5ed9aeeaa74822a6cd4936265_r.jpg?source=1940ef5c"]);const n=()=>{De().ajax({url:"http://47.113.202.189:3000/api/post/getposts/",type:"get",data:{user_id:e.state.user.id,show_post_count:o},headers:{Authorization:"Bearer "+e.state.user.token},success(e){t.value=e,console.log(t.value)},error(){console.log("error_message: getposts")}})};n();const r=()=>{De().ajax({url:"http://47.113.202.189:3000/api/post/addpost/",type:"post",data:{user_id:e.state.user.id,content:s.value},headers:{Authorization:"Bearer "+e.state.user.token},success(){n(),M.Modal.getInstance("#addpost").hide(),s.value=""},error(){}})},i=s=>{De().ajax({url:"http://47.113.202.189:3000/api/post/likepost/",type:"post",data:{user_id:e.state.user.id,post_id:s},headers:{Authorization:"Bearer "+e.state.user.token},success(){for(let e of t.value)e.post.post.id==s&&(!1===e.post.isLove?(e.post.isLove=!0,e.post.post.loveCount++):!0===e.post.isLove&&(e.post.isLove=!1,e.post.post.loveCount--))},error(){console.log("error_message: likepost")}})},c=s=>{De().ajax({url:"http://47.113.202.189:3000/api/post/starpost/",type:"post",data:{user_id:e.state.user.id,post_id:s},headers:{Authorization:"Bearer "+e.state.user.token},success(){for(let e of t.value)e.post.post.id==s&&(!1===e.post.isStar?(e.post.isStar=!0,e.post.post.starCount++):!0===e.post.isStar&&(e.post.isStar=!1,e.post.post.starCount--))},error(){console.log("error_message: starpost")}})},d=t=>{De().ajax({url:"http://47.113.202.189:3000/api/post/comment/add/",type:"post",data:{user_id:e.state.user.id,post_id:t,comment:a.value},headers:{Authorization:"Bearer "+e.state.user.token},success(){a.value="",n()},error(){console.log("error_message: comment_add")}})};return{pacs:t,new_post:s,new_comment:a,carousel_photos:l,add_post:r,like_post:i,star_post:c,add_comment:d}}};const ja=(0,B.Z)(Ba,[["render",Da]]);var Sa=ja;const Ma={class:"container"},Ha={class:"row"},Ua={class:"col-3"},La={class:"card",style:{"margin-top":"20px"}},Pa={class:"card-body"},Oa=["src"],qa={class:"username"},Ra={class:"username"},Va={class:"col-9"},$a={class:"card",style:{"margin-top":"20px"}},Ta={class:"card-header"},Wa=(0,o._)("span",{style:{"font-size":"120%"}},"我的bot",-1),Za=(0,o._)("button",{type:"button",class:"btn btn-primary float-end","data-bs-toggle":"modal","data-bs-target":"#add-bot-btn"},"创建",-1),Fa={class:"modal fade",id:"add-bot-btn","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1"},Ga={class:"modal-dialog modal-xl"},Ka={class:"modal-content"},Ea=(0,o._)("div",{class:"modal-header"},[(0,o._)("h5",{class:"modal-title"},"创建"),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Na={class:"modal-body"},Ya={class:"mb-3"},Ja=(0,o._)("label",{for:"add-bot-title",class:"form-label"},"标题",-1),Qa={class:"mb-3"},Xa=(0,o._)("label",{for:"add-bot-description",class:"form-label"},"简介",-1),eo={class:"mb-3"},to=(0,o._)("label",{for:"add-bot-code",class:"form-label"},"代码",-1),so={class:"modal-footer"},ao={class:"error_message"},oo=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1),lo={class:"card-body"},no={key:0},ro=(0,o._)("span",{style:{"margin-left":"21vw","font-size":"large","font-weight":"600"}},"快来创建你的第一个bot吧！！",-1),io=[ro],co={key:1,class:"table table-striped table-hover"},uo=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"名称"),(0,o._)("th",{style:{"text-align":"center"}},"胜/负"),(0,o._)("th",{style:{"text-align":"center"}},"创建时间"),(0,o._)("th",{style:{"text-align":"center"}},"操作")])],-1),po={style:{"text-align":"center"}},mo={style:{"text-align":"center"}},_o={style:{"text-align":"center"}},ho=["data-bs-target"],go=["data-bs-target"],bo=["id"],vo={class:"modal-dialog modal-xl"},fo={class:"modal-content"},wo=(0,o._)("div",{class:"modal-header"},[(0,o._)("h5",{class:"modal-title"},"修改"),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),yo={class:"modal-body"},ko={class:"mb-3"},xo=(0,o._)("label",{for:"add-bot-title",class:"form-label"},"标题",-1),Co=["onUpdate:modelValue"],zo={class:"mb-3"},Io=(0,o._)("label",{for:"add-bot-description",class:"form-label"},"简介",-1),Ao=["onUpdate:modelValue"],Do={class:"mb-3"},Bo=(0,o._)("label",{for:"add-bot-code",class:"form-label"},"代码",-1),jo={class:"modal-footer"},So={class:"error_message"},Mo=["onClick"],Ho=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1),Uo=["id"],Lo={class:"modal-dialog modal-dialog-centered"},Po={class:"modal-content"},Oo=(0,o._)("div",{class:"modal-body"},[(0,o._)("span",{style:{"font-size":"120%"}},"您确定要删除此bot吗？")],-1),qo={class:"modal-footer"},Ro=["onClick"],Vo=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function $o(e,t,s,l,r,i){const c=(0,o.up)("VAceEditor");return(0,o.wg)(),(0,o.iD)("div",Ma,[(0,o._)("div",Ha,[(0,o._)("div",Ua,[(0,o._)("div",La,[(0,o._)("div",Pa,[(0,o._)("img",{src:e.$store.state.user.photo,alt:"",style:{width:"100%","border-radius":"20px"}},null,8,Oa)]),(0,o._)("div",qa," 昵称： "+(0,n.zw)(e.$store.state.user.username),1),(0,o._)("div",Ra," 天梯分： "+(0,n.zw)(e.$store.state.user.rating),1)])]),(0,o._)("div",Va,[(0,o._)("div",$a,[(0,o._)("div",Ta,[Wa,Za,(0,o._)("div",Fa,[(0,o._)("div",Ga,[(0,o._)("div",Ka,[Ea,(0,o._)("div",Na,[(0,o._)("div",Ya,[Ja,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.botadd.title=e),type:"email",class:"form-control",id:"add-bot-title",placeholder:"请输入bot的标题"},null,512),[[a.nr,l.botadd.title]])]),(0,o._)("div",Qa,[Xa,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.botadd.description=e),class:"form-control",id:"add-bot-description",rows:"3",placeholder:"请输入bot的简介"},null,512),[[a.nr,l.botadd.description]])]),(0,o._)("div",eo,[to,(0,o.Wm)(c,{value:l.botadd.content,"onUpdate:value":t[2]||(t[2]=e=>l.botadd.content=e),onInit:e.editorInit,lang:"c_cpp",theme:"textmate",style:{height:"300px"}},null,8,["value","onInit"])])]),(0,o._)("div",so,[(0,o._)("div",ao,(0,n.zw)(l.botadd.error_message),1),(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=(...e)=>l.add_bot&&l.add_bot(...e))},"提交"),oo])])])])]),(0,o._)("div",lo,[0==l.bots_is_empty?((0,o.wg)(),(0,o.iD)("div",no,io)):(0,o.kq)("",!0),1==l.bots_is_empty?((0,o.wg)(),(0,o.iD)("table",co,[uo,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.bots,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id},[(0,o._)("td",null,(0,n.zw)(t.title),1),(0,o._)("td",po,(0,n.zw)(t.winCount)+"/"+(0,n.zw)(t.loseCount),1),(0,o._)("td",mo,(0,n.zw)(t.createTime),1),(0,o._)("td",_o,[(0,o._)("button",{type:"button",class:"btn btn-info","data-bs-toggle":"modal","data-bs-target":"#update-bot-modal-"+t.id},"修改",8,ho),(0,o._)("button",{type:"button",class:"btn btn-danger",style:{"margin-left":"10px"},"data-bs-toggle":"modal","data-bs-target":"#remove-bot-modal"+t.id},"删除",8,go)]),(0,o._)("div",{class:"modal fade",id:"update-bot-modal-"+t.id,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1"},[(0,o._)("div",vo,[(0,o._)("div",fo,[wo,(0,o._)("div",yo,[(0,o._)("div",ko,[xo,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e=>t.title=e,type:"email",class:"form-control",id:"add-bot-title"},null,8,Co),[[a.nr,t.title]])]),(0,o._)("div",zo,[Io,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":e=>t.description=e,class:"form-control",id:"add-bot-description",rows:"3",placeholder:"请输入Bot简介"},null,8,Ao),[[a.nr,t.description]])]),(0,o._)("div",Do,[Bo,(0,o.Wm)(c,{value:t.content,"onUpdate:value":e=>t.content=e,onInit:e.editorInit,lang:"c_cpp",theme:"textmate",style:{height:"300px"}},null,8,["value","onUpdate:value","onInit"])])]),(0,o._)("div",jo,[(0,o._)("div",So,(0,n.zw)(t.error_message),1),(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:e=>l.update_bot(t)},"提交",8,Mo),Ho])])])],8,bo),(0,o._)("div",{class:"modal fade",id:"remove-bot-modal"+t.id,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[(0,o._)("div",Lo,[(0,o._)("div",Po,[Oo,(0,o._)("div",qo,[(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:e=>l.remove_bot(t)},"确定",8,Ro),Vo])])])],8,Uo)])))),128))])])):(0,o.kq)("",!0)])])])])])}var To=s(6138),Wo=s(3239),Zo=s.n(Wo),Fo={components:{VAceEditor:To.m},setup(){localStorage.setItem("current_webPage_name","user_bot_index"),Zo().config.set("basePath","https://cdn.jsdelivr.net/npm/ace-builds@"+s(3239).version+"/src-noconflict/");const e=new A.oR;let t=(0,J.iH)([]),a=(0,J.iH)(!1);const o=(0,J.qj)({title:"",description:"",content:"",error_message:""}),l=()=>{De().ajax({url:"http://47.113.202.189:3000/api/user/bot/getlist/",type:"get",headers:{Authorization:"Bearer "+e.state.user.token},success(e){t.value=e,""==t.value?a.value=!1:a.value=!0}})};l();const n=()=>{o.error_message="",De().ajax({url:"http://47.113.202.189:3000/api/user/bot/add/",type:"post",data:{title:o.title,description:o.description,content:o.content},headers:{authorization:"Bearer "+e.state.user.token},success(e){"success"===e.error_message?(o.title="",o.description="",o.content="",M.Modal.getInstance("#add-bot-btn").hide(),l()):o.error_message=e.error_message,console.log(e)},error(e){console.log(e)}})},r=t=>{t.error_message="",De().ajax({url:"http://47.113.202.189:3000/api/user/bot/update/",type:"post",data:{bot_id:t.id,title:t.title,description:t.description,content:t.content},headers:{authorization:"Bearer "+e.state.user.token},success(e){"success"===e.error_message?(M.Modal.getInstance("#update-bot-modal-"+t.id).hide(),l()):t.error_message=e.error_message,console.log(e)},error(e){console.log(e)}})},i=t=>{De().ajax({url:"http://47.113.202.189:3000/api/user/bot/remove/",type:"post",data:{bot_id:t.id},headers:{Authorization:"Bearer "+e.state.user.token},success(e){"success"===e.error_message&&(M.Modal.getInstance("#remove-bot-modal"+t.id).hide(),l())}})};return{bots:t,bots_is_empty:a,botadd:o,add_bot:n,update_bot:r,remove_bot:i}}};const Go=(0,B.Z)(Fo,[["render",$o]]);var Ko=Go;function Eo(e,t,s,a,l,n){const r=(0,o.up)("ContentField");return(0,o.wg)(),(0,o.j4)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)(" 404 Not Found ")])),_:1})}var No={components:{ContentField:Ht}};const Yo=(0,B.Z)(No,[["render",Eo]]);var Jo=Yo;const Qo=e=>((0,o.dD)("data-v-6bcf1f4c"),e=e(),(0,o.Cn)(),e),Xo={key:0,class:"BACK"},el={class:"row justify-content-md-center box"},tl={class:"col-10"},sl=Qo((()=>(0,o._)("div",{class:"mb-3",style:{"text-align":"center","font-size":"x-large",color:"aliceblue"}}," LOGIN ",-1))),al={class:"mb-3"},ol=Qo((()=>(0,o._)("label",{for:"username",class:"form-label",style:{color:"aliceblue","margin-top":"10px"}},"用户名",-1))),ll={class:"mb-3"},nl=Qo((()=>(0,o._)("label",{for:"password",class:"form-label",style:{color:"aliceblue"}},"密码",-1))),rl={class:"error-message"},il=Qo((()=>(0,o._)("button",{type:"submit",class:"btn btn-primary",style:{"margin-top":"10px"}},"登录",-1)));function cl(e,t,s,l,r,i){return e.$store.state.user.pulling_info?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Xo,[(0,o._)("div",el,[(0,o._)("div",tl,[(0,o._)("form",{onSubmit:t[2]||(t[2]=(0,a.iM)(((...e)=>l.login&&l.login(...e)),["prevent"]))},[sl,(0,o._)("div",al,[ol,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),type:"text",class:"form-control",id:"username",placeholder:"请输入用户名"},null,512),[[a.nr,l.username]])]),(0,o._)("div",ll,[nl,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),type:"password",class:"form-control",id:"password",placeholder:"请输入密码"},null,512),[[a.nr,l.password]])]),(0,o._)("div",rl,(0,n.zw)(l.error_message),1),il],32)])])]))}var dl={setup(){const e=(0,A.oR)(),t=localStorage.getItem("current_webPage_name");let s=(0,J.iH)(""),a=(0,J.iH)(""),o=(0,J.iH)("");if("user_account_login"==t)e.commit("updatePullingInfo",!1);else{const s=localStorage.getItem("jwt_token");s?(e.commit("updateToken",s),e.dispatch("getinfo",{success(){e.state.user.button?e.commit("updatePullingInfo",!1):Ol.push({name:t})},error(){e.commit("updatePullingInfo",!1)}})):e.commit("updatePullingInfo",!1)}const l=()=>{o.value="",e.dispatch("login",{username:s.value,password:a.value,success(){e.dispatch("getinfo",{success(){Ol.push({name:"home"}),e.state.user.is_login=!0}})},error(){o.value="用户名或密码错误"}})};return{username:s,password:a,error_message:o,login:l}}};const ul=(0,B.Z)(dl,[["render",cl],["__scopeId","data-v-6bcf1f4c"]]);var pl=ul;const ml=e=>((0,o.dD)("data-v-5d207e18"),e=e(),(0,o.Cn)(),e),_l={class:"BACK"},hl={class:"row justify-content-md-center box"},gl={class:"col-10"},bl=ml((()=>(0,o._)("div",{class:"mb-3",style:{"text-align":"center","font-size":"x-large",color:"aliceblue"}}," REGISTER ",-1))),vl={class:"mb-3"},fl=ml((()=>(0,o._)("label",{for:"username",class:"form-label",style:{color:"aliceblue"}},"用户名",-1))),wl={class:"mb-3"},yl=ml((()=>(0,o._)("label",{for:"password",class:"form-label",style:{color:"aliceblue"}},"密码",-1))),kl={class:"mb-3"},xl=ml((()=>(0,o._)("label",{for:"confirmedPassword",class:"form-label",style:{color:"aliceblue"}},"确认密码",-1))),Cl={class:"error-message"},zl=ml((()=>(0,o._)("button",{type:"submit",class:"btn btn-primary"},"注册",-1)));function Il(e,t,s,l,r,i){return(0,o.wg)(),(0,o.iD)("div",_l,[(0,o._)("div",hl,[(0,o._)("div",gl,[(0,o._)("form",{onSubmit:t[3]||(t[3]=(0,a.iM)(((...e)=>l.register&&l.register(...e)),["prevent"]))},[bl,(0,o._)("div",vl,[fl,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),type:"text",class:"form-control",id:"username",placeholder:"请输入用户名"},null,512),[[a.nr,l.username]])]),(0,o._)("div",wl,[yl,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),type:"password",class:"form-control",id:"password",placeholder:"请输入密码"},null,512),[[a.nr,l.password]])]),(0,o._)("div",kl,[xl,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.confirmedPassword=e),type:"password",class:"form-control",id:"confirmedPassword",placeholder:"请再次输入密码"},null,512),[[a.nr,l.confirmedPassword]])]),(0,o._)("div",Cl,(0,n.zw)(l.error_message),1),zl],32)])])])}var Al={setup(){let e=(0,J.iH)(""),t=(0,J.iH)(""),s=(0,J.iH)(""),a=(0,J.iH)("");const o=()=>{De().ajax({url:"http://47.113.202.189:3000/api/user/account/register/",type:"post",data:{username:e.value,password:t.value,confirmedPassword:s.value},success(e){"success"===e.error_message?Ol.push({name:"user_account_login"}):a.value=e.error_message}})};return{username:e,password:t,confirmedPassword:s,error_message:a,register:o}}};const Dl=(0,B.Z)(Al,[["render",Il],["__scopeId","data-v-5d207e18"]]);var Bl=Dl,jl={state:{id:"",username:"",photo:"",rating:1500,token:"",is_login:!1,pulling_info:!0,button:!1,rate:1e3},getters:{},mutations:{updateUser(e,t){e.id=t.id,e.username=t.username,e.photo=t.photo,e.rating=t.rating,e.is_login=t.is_login},updateToken(e,t){e.token=t},logout(e){e.id="",e.username="",e.photo="",e.token="",e.is_login=!1},updatePullingInfo(e,t){e.pulling_info=t},updateRate(e,t){e.rate=t}},actions:{login(e,t){De().ajax({url:"http://47.113.202.189:3000/api/user/account/login/",type:"post",data:{username:t.username,password:t.password},success(s){"success"===s.error_message?(e.commit("updateToken",s.token),localStorage.setItem("jwt_token",s.token),t.success(s)):t.error(s)},error(e){t.error(e)}})},getinfo(e,t){De().ajax({url:"http://47.113.202.189:3000/api/user/account/info/",type:"get",headers:{Authorization:"Bearer "+e.state.token},success(s){"success"===s.error_message?(e.commit("updateUser",{...s,is_login:!0}),t.success(s)):t.error(s)},error(e){t.error(e)}})},logout(e){e.commit("logout")}},modules:{}},Sl={state:{status:"matching",socket:null,opponent_username:"",opponent_photo:"",gameMap:"null",idA:0,sxA:0,syA:0,idB:0,sxB:0,syB:0,gameObject:null,loser:"none",time:""},getters:{},mutations:{updateSocket(e,t){e.socket=t},updateOpponent(e,t){e.opponent_username=t.opponent_username,e.opponent_photo=t.opponent_photo},updateStatus(e,t){e.status=t},updateGame(e,t){e.gameMap=t.map,e.idA=t.idA,e.sxA=t.sxA,e.syA=t.syA,e.idB=t.idB,e.sxB=t.sxB,e.syB=t.syB},updateGameObject(e,t){e.gameObject=t},updateLoser(e,t){e.loser=t},updateTime(e,t){e.time=t}},actions:{},modules:{}},Ml={state:{is_record:!1,current_page:1,stepsA:"",stepsB:"",record_loser:""},getters:{},mutations:{updateIsRecord(e,t){e.is_record=t},updateSteps(e,t){e.stepsA=t.stepsA,e.stepsB=t.stepsB},updateRecordLoser(e,t){e.record_loser=t},updateCurrent_page(e,t){e.current_page=t}},actions:{},modules:{}},Hl={state:{posts:[]},getters:{},mutations:{updatePosts(e,t){e.posts=t,console.log(Ul.state.post.posts)}},actions:{getPosts(e){De().ajax({url:"http://47.113.202.189:3000/api/post/getlist/",type:"get",headers:{Authorization:"Bearer "+Ul.state.user.token},success(t){e.commit("updatePosts",t)},error(){console.log("error_message: getposts")}})}},modules:{}},Ul=(0,A.MT)({state:{},getters:{},mutations:{},actions:{},modules:{user:jl,pk:Sl,record:Ml,post:Hl}});const Ll=[{path:"/",name:"home",redirect:"/pk/",meta:{requestAuth:!0}},{path:"/pk/",name:"pk_index",component:Ze,meta:{requestAuth:!0}},{path:"/record/",name:"record_index",component:Pt,meta:{requestAuth:!0}},{path:"/record/:recordId/",name:"record_content",component:$t,meta:{requestAuth:!0}},{path:"/ranklist/",name:"ranklist_index",component:bs,meta:{requestAuth:!0}},{path:"/forum/",name:"forum_index",component:Sa,meta:{requestAuth:!0}},{path:"/user/bot/",name:"user_bot_index",component:Ko,meta:{requestAuth:!0}},{path:"/user/account/login/",name:"user_account_login",component:pl,meta:{requestAuth:!1}},{path:"/user/account/register/",name:"user_account_register",component:Bl,meta:{requestAuth:!1}},{path:"/404/",name:"404",component:Jo,meta:{requestAuth:!1}},{path:"/:catchAll(.*)",redirect:"/404/"}],Pl=(0,I.p7)({history:(0,I.PO)(),routes:Ll});Pl.beforeEach(((e,t,s)=>{e.meta.requestAuth&&!Ul.state.user.is_login?s({name:"user_account_login"}):s()}));var Ol=Pl,ql=s(7085),Rl=s.n(ql),Vl=s(1986),$l=s.n(Vl),Tl=s(5660),Wl=s.n(Tl),Zl=s(3943);s(4415);Rl().use($l(),{Prism:Wl()}),(0,a.ri)(L).use(Ul).use(Ol).use(Rl()).use(Zl.Z).mount("#app")}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var l=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(l.exports,l,l.exports,s),l.loaded=!0,l.exports}s.m=e,function(){s.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){var e=[];s.O=function(t,a,o,l){if(!a){var n=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],l=e[d][2];for(var r=!0,i=0;i<a.length;i++)(!1&l||n>=l)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(r=!1,l<n&&(n=l));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,o,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,l,n=a[0],r=a[1],i=a[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(i)var d=i(s)}for(t&&t(a);c<n.length;c++)l=n[c],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(d)},a=self["webpackChunknewweb"]=self["webpackChunknewweb"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(5960)}));a=s.O(a)})();
//# sourceMappingURL=app.abcb301b.js.map